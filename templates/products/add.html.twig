{% extends 'base.html.twig' %}

{% block title %}{% endblock %}

{% block body %}
	<div class="container mt-4">
		<h1>Ajouter un produit</h1>
		<div class="row">
			<div class="col-12 edit">
				<div class="col-6 space">
						{{form_start(form)}}
						{{ form_row(form.image , {'attr' : {'onchange' : "previewPicture(this)" }} ) }}
						{% if app.request.attributes.get('_route') == 'app_products.add' %}
							<div class="img">
								<img src="" alt="" id="image" style="max-width:100%; border-radius:15px;">
							</div>
						{% endif %}
					</div>
					<div class="col-6">
						{{form_row(form.name)}}
						{{form_row(form.description)}}
						{{form_row(form.price)}}
						{{form_row(form.solde)}}
						{{form_row(form.stock)}}
						{{form_row(form.category)}}

						<button type="submit" class="btn btn-primary">Valider</button>
						{{form_end(form)}}
				</div>
			</div>
		</div>

	</div>
    <script type="text/javascript" >
    // L'image img#image
        var image = document.getElementById("image");
        
        // La fonction previewPicture
        var previewPicture  = function (e) {

            // e.files contient un objet FileList
            const [picture] = e.files

            // "picture" est un objet File
            if (picture) {
                // On change l'URL de l'image
                image.src = URL.createObjectURL(picture)
            }
        } 
    </script>
{% endblock %}
